<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.StackPane?>

<BorderPane prefHeight="700.0" prefWidth="1000.0"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            stylesheets="@../css/agent-tabs.css"
            fx:controller="controllers.AgentController">

    <!-- TOP BAR -->
    <top>
        <VBox spacing="10" style="-fx-background-color: #34495e;">
            <children>
                <Label text="Agent Dashboard - ICT Service Desk"
                       style="-fx-text-fill: white; -fx-font-size: 18; -fx-font-weight: bold;"/>
                <HBox spacing="10">
                    <Label fx:id="welcomeLabel"
                           text="Welcome, Agent!"
                           style="-fx-text-fill: white;"/>
                    <Button text="Logout" onAction="#handleLogout"/>
                </HBox>
            </children>
            <padding>
                <Insets top="10" bottom="10" left="10" right="10"/>
            </padding>
        </VBox>
    </top>

    <!-- CENTER -->
    <center>
        <StackPane fx:id="contentArea">
            <TabPane tabClosingPolicy="UNAVAILABLE">
                <tabs>

                    <!-- TAB 1: DASHBOARD -->
                    <Tab text="Dashboard &amp; Insights" closable="false">
                        <ScrollPane fitToWidth="true">
                            <content>
                                <VBox fx:id="dashboardContent" spacing="15">
                                    <padding>
                                        <Insets top="15" bottom="15" left="15" right="15"/>
                                    </padding>

                                    <!-- METRICS CARDS -->
                                    <HBox spacing="15">
                                        <VBox spacing="5"
                                              style="-fx-border-color: #e0e0e0; -fx-border-radius: 8; -fx-padding: 15; -fx-background-color: #f9f9f9;"
                                              HBox.hgrow="ALWAYS">
                                            <Label text="Total Assigned"
                                                   style="-fx-font-weight: bold; -fx-font-size: 12;"/>
                                            <Label text="1" style="-fx-font-size: 28; -fx-font-weight: bold;"/>
                                            <Label text="Active tickets"
                                                   style="-fx-text-fill: #888; -fx-font-size: 11;"/>
                                        </VBox>
                                        <VBox spacing="5"
                                              style="-fx-border-color: #e0e0e0; -fx-border-radius: 8; -fx-padding: 15; -fx-background-color: #f9f9f9;"
                                              HBox.hgrow="ALWAYS">
                                            <Label text="Resolved"
                                                   style="-fx-font-weight: bold; -fx-font-size: 12;"/>
                                            <Label text="0" style="-fx-font-size: 28; -fx-font-weight: bold;"/>
                                            <Label text="Completed tickets"
                                                   style="-fx-text-fill: #888; -fx-font-size: 11;"/>
                                        </VBox>
                                        <VBox spacing="5"
                                              style="-fx-border-color: #e0e0e0; -fx-border-radius: 8; -fx-padding: 15; -fx-background-color: #f9f9f9;"
                                              HBox.hgrow="ALWAYS">
                                            <Label text="Avg Rating"
                                                   style="-fx-font-weight: bold; -fx-font-size: 12;"/>
                                            <Label text="0.0" style="-fx-font-size: 28; -fx-font-weight: bold;"/>
                                            <Label text="Customer satisfaction"
                                                   style="-fx-text-fill: #888; -fx-font-size: 11;"/>
                                        </VBox>
                                        <VBox spacing="5"
                                              style="-fx-border-color: #e0e0e0; -fx-border-radius: 8; -fx-padding: 15; -fx-background-color: #f9f9f9;"
                                              HBox.hgrow="ALWAYS">
                                            <Label text="SLA Compliance"
                                                   style="-fx-font-weight: bold; -fx-font-size: 12;"/>
                                            <Label text="0%" style="-fx-font-size: 28; -fx-font-weight: bold;"/>
                                            <Label text="On-time resolution"
                                                   style="-fx-text-fill: #888; -fx-font-size: 11;"/>
                                        </VBox>
                                    </HBox>

                                    <!-- ACHIEVEMENTS -->
                                    <Label text="Achievements &amp; Gamification"
                                           style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                                    <VBox spacing="10"
                                          style="-fx-border-color: #e0e0e0; -fx-border-radius: 8; -fx-padding: 15; -fx-background-color: #f9f9f9;">
                                        <HBox spacing="10" alignment="CENTER_LEFT">
                                            <Label text="âš¡" style="-fx-font-size: 18;"/>
                                            <VBox spacing="2" HBox.hgrow="ALWAYS">
                                                <Label text="Quick Resolver" style="-fx-font-weight: bold;"/>
                                                <Label text="Resolved 10+ tickets"
                                                       style="-fx-text-fill: #888; -fx-font-size: 11;"/>
                                            </VBox>
                                            <ProgressBar progress="0.0" prefWidth="80"/>
                                            <Label text="0% Complete" style="-fx-font-size: 11;"/>
                                        </HBox>
                                        <HBox spacing="10" alignment="CENTER_LEFT">
                                            <Label text="ðŸ‘‘" style="-fx-font-size: 18;"/>
                                            <VBox spacing="2" HBox.hgrow="ALWAYS">
                                                <Label text="Customer Champion" style="-fx-font-weight: bold;"/>
                                                <Label text="Maintain 4.5+ star rating"
                                                       style="-fx-text-fill: #888; -fx-font-size: 11;"/>
                                            </VBox>
                                            <ProgressBar progress="0.0" prefWidth="80"/>
                                            <Label text="0% Complete" style="-fx-font-size: 11;"/>
                                        </HBox>
                                        <HBox spacing="10" alignment="CENTER_LEFT">
                                            <Label text="ðŸŽ¯" style="-fx-font-size: 18;"/>
                                            <VBox spacing="2" HBox.hgrow="ALWAYS">
                                                <Label text="SLA Master" style="-fx-font-weight: bold;"/>
                                                <Label text="90%+ SLA compliance"
                                                       style="-fx-text-fill: #888; -fx-font-size: 11;"/>
                                            </VBox>
                                            <ProgressBar progress="0.0" prefWidth="80"/>
                                            <Label text="0% Complete" style="-fx-font-size: 11;"/>
                                        </HBox>
                                    </VBox>

                                    <!-- WORKLOAD -->
                                    <Label text="Workload Distribution"
                                           style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                                    <VBox spacing="10"
                                          style="-fx-border-color: #e0e0e0; -fx-border-radius: 8; -fx-padding: 15; -fx-background-color: #f9f9f9;">
                                        <HBox spacing="10" alignment="CENTER_LEFT">
                                            <Label text="In Progress" prefWidth="100"/>
                                            <ProgressBar progress="1.0" HBox.hgrow="ALWAYS"/>
                                            <Label text="1 tickets"/>
                                        </HBox>
                                        <HBox spacing="10" alignment="CENTER_LEFT">
                                            <Label text="Resolved" prefWidth="100"/>
                                            <ProgressBar progress="0.0" HBox.hgrow="ALWAYS"/>
                                            <Label text="0 tickets"/>
                                        </HBox>
                                        <HBox spacing="10" alignment="CENTER_LEFT">
                                            <Label text="Escalated" prefWidth="100"/>
                                            <ProgressBar progress="0.0" HBox.hgrow="ALWAYS"/>
                                            <Label text="0 tickets"/>
                                        </HBox>
                                    </VBox>

                                    <!-- ACTIVITY -->
                                    <Label text="Recent Activity"
                                           style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                                    <VBox spacing="10"
                                          style="-fx-border-color: #e0e0e0; -fx-border-radius: 8; -fx-padding: 15; -fx-background-color: #f9f9f9;">
                                        <Label text="No recent activity" style="-fx-text-fill: #888;"/>
                                    </VBox>
                                </VBox>
                            </content>
                        </ScrollPane>
                    </Tab>

                    <!-- TAB 2: MY TICKETS -->
                    <Tab text="My Tickets (1)" closable="false">
                        <ScrollPane fitToWidth="true">
                            <content>
                                <VBox fx:id="myTicketsContent" spacing="15">
                                    <padding>
                                        <Insets top="15" bottom="15" left="15" right="15"/>
                                    </padding>

                                    <Label text="My Assigned Tickets"
                                           style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                                    <Label fx:id="ticketCountLabel"
                                           text="1 total tickets"
                                           style="-fx-text-fill: #888;"/>

                                    <!-- FILTER PANEL -->
                                    <VBox spacing="10"
                                          style="-fx-border-color: #e0e0e0; -fx-border-radius: 8; -fx-padding: 15; -fx-background-color: #f9f9f9;">
                                        <Label text="Filter Tickets"
                                               style="-fx-font-weight: bold; -fx-font-size: 12;"/>

                                        <TextField promptText="ðŸ” Search tickets..."
                                                   style="-fx-padding: 10; -fx-font-size: 12;"/>

                                        <ComboBox fx:id="statusFilterCombo"
                                                  promptText="All Status"
                                                  style="-fx-min-width: 200;"/>
                                        <ComboBox fx:id="priorityFilterCombo"
                                                  promptText="All Priorities"
                                                  style="-fx-min-width: 200;"/>
                                    </VBox>

                                    <!-- TICKET CARDS -->
                                    <VBox fx:id="ticketsListContainer" spacing="10"/>
                                </VBox>
                            </content>
                        </ScrollPane>
                    </Tab>

                    <!-- TAB 3: TICKET QUEUE -->
                    <Tab text="Ticket Queue (2)" closable="false">
                        <ScrollPane fitToWidth="true">
                            <content>
                                <VBox fx:id="ticketQueueContent" spacing="15">
                                    <padding>
                                        <Insets top="15" bottom="15" left="15" right="15"/>
                                    </padding>

                                    <Label text="Unassigned Tickets"
                                           style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                                    <Label text="2 tickets"
                                           style="-fx-text-fill: #888;"/>

                                    <!-- FILTER PANEL -->
                                    <VBox spacing="10"
                                          style="-fx-border-color: #e0e0e0; -fx-border-radius: 8; -fx-padding: 15; -fx-background-color: #f9f9f9;">
                                        <Label text="Filter Tickets"
                                               style="-fx-font-weight: bold; -fx-font-size: 12;"/>

                                        <TextField promptText="ðŸ” Search tickets..."
                                                   style="-fx-padding: 10; -fx-font-size: 12;"/>

                                        <ComboBox promptText="All Status"
                                                  style="-fx-min-width: 200;"/>
                                        <ComboBox promptText="All Priorities"
                                                  style="-fx-min-width: 200;"/>
                                    </VBox>

                                    <!-- QUEUE CARDS -->
                                    <VBox fx:id="queueCardsContainer" spacing="10"/>
                                </VBox>
                            </content>
                        </ScrollPane>
                    </Tab>

                </tabs>
            </TabPane>
        </StackPane>
    </center>

</BorderPane>
